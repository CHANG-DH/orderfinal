<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>주문 관리 대시보드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .status-btn-group button {
            transition: all 0.2s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-200">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center my-6">
            <h1 class="text-4xl font-bold text-gray-800">주문 관리 대시보드</h1>
            <p class="text-gray-600 mt-2">새로운 주문이 실시간으로 업데이트됩니다.</p>
        </header>

        <!-- 주문 목록 -->
        <main id="order-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- 주문 카드 템플릿 -->
            <template id="order-card-template">
                <div class="bg-white rounded-xl shadow-lg p-5 flex flex-col">
                    <div class="flex justify-between items-start mb-3">
                        <h2 class="text-2xl font-bold text-indigo-600">테이블 <span class="table-number"></span></h2>
                        <span class="order-time text-sm text-gray-500"></span>
                    </div>
                    <div class="order-items border-t border-b border-gray-200 py-3 my-3 space-y-2 text-gray-700 flex-grow">
                        <!-- 메뉴 아이템이 여기에 추가됩니다 -->
                    </div>
                    <div class="text-right mb-4">
                        <span class="text-lg font-semibold">총 금액:</span>
                        <span class="total-price text-xl font-bold text-gray-900"></span>
                    </div>
                    <div class="status-btn-group grid grid-cols-2 gap-2 text-sm">
                        <button data-status="주문 접수 중" class="p-2 rounded-md font-semibold">접수 중</button>
                        <button data-status="요리 중" class="p-2 rounded-md font-semibold">요리 중</button>
                        <button data-status="서빙 완료" class="p-2 rounded-md font-semibold">서빙 완료</button>
                        <button data-status="처리 완료" class="p-2 rounded-md font-semibold text-red-700 bg-red-100 hover:bg-red-200">처리 완료</button>
                    </div>
                </div>
            </template>
        </main>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, query, onSnapshot, doc, updateDoc, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- 중요 ---
        // 고객용 페이지와 동일한 Firebase 프로젝트 설정 값을 사용해야 합니다.
        const firebaseConfig = {
 		 apiKey: "AIzaSyAWzxJrQROhzSnVJCmTEUDfpYn-TJqHbHQ",
  		 authDomain: "order-4f8a2.firebaseapp.com",
 		 projectId: "order-4f8a2",
 		 storageBucket: "order-4f8a2.firebasestorage.app",
 		 messagingSenderId: "69210404028",
 		 appId: "1:69210404028:web:25fe58abbcbff4d1e9ccb9",
 		 measurementId: "G-JBK15C76HS"
		};
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const orderList = document.getElementById('order-list');
        const orderCardTemplate = document.getElementById('order-card-template');

        const statusColors = {
            "주문 접수 중": "bg-yellow-100 text-yellow-800",
            "요리 중": "bg-blue-100 text-blue-800",
            "서빙 완료": "bg-green-100 text-green-800",
            "처리 완료": "bg-gray-100 text-gray-500 line-through",
        };

        // 실시간으로 주문 데이터 가져오기
        const q = query(collection(db, "orders"), orderBy("timestamp", "desc"));
        onSnapshot(q, (querySnapshot) => {
            orderList.innerHTML = ''; // 목록 초기화
            querySnapshot.forEach((docSnapshot) => { // doc -> docSnapshot으로 변경하여 혼동 방지
                const order = docSnapshot.data();
                const orderId = docSnapshot.id;
                
                // '처리 완료' 상태가 아닌 주문만 표시
                if (order.status === '처리 완료') return;

                const card = orderCardTemplate.content.cloneNode(true);
                
                card.querySelector('.table-number').textContent = order.tableNumber;
                card.querySelector('.order-time').textContent = order.timestamp ? new Date(order.timestamp.seconds * 1000).toLocaleTimeString() : '';
                card.querySelector('.total-price').textContent = `${order.totalPrice.toLocaleString()}원`;
                
                const itemsContainer = card.querySelector('.order-items');
                order.items.forEach(item => {
                    const p = document.createElement('p');
                    p.className = 'flex justify-between';
                    p.innerHTML = `<span>${item.name}</span><span>x${item.quantity}</span>`;
                    itemsContainer.appendChild(p);
                });

                const statusButtons = card.querySelectorAll('.status-btn-group button');
                statusButtons.forEach(btn => {
                    const status = btn.dataset.status;
                    // 현재 상태에 따라 버튼 스타일링
                    if (status === order.status) {
                        btn.className += ` ${statusColors[status]}`;
                    } else {
                        btn.className += ' bg-gray-200 hover:bg-gray-300';
                    }
                    
                    // 버튼 클릭 시 상태 업데이트
                    btn.addEventListener('click', () => {
                        // FIX: Firestore 문서 참조 구문 오류 수정
                        const orderRef = doc(db, "orders", orderId);
                        updateDoc(orderRef, {
                            status: status
                        });
                    });
                });

                // 카드 전체에 현재 상태에 따른 배경색 적용
                const cardDiv = card.querySelector('.bg-white');
                if (order.status === "주문 접수 중") {
                    cardDiv.classList.add('border-4', 'border-yellow-400');
                } else if (order.status === "요리 중") {
                    cardDiv.classList.add('border-4', 'border-blue-400');
                } else if (order.status === "서빙 완료") {
                    cardDiv.classList.add('border-4', 'border-green-400');
                }


                orderList.appendChild(card);
            });
        });
    </script>
</body>
</html>
```

제가 수정한 내용은 다음과 같습니다.

* `btn.addEventListener` 내부의 `const orderRef = doc.db, "orders", orderId);` 라인을 올바른 Firestore 함수 호출 방식인 `const orderRef = doc(db, "orders", orderId);`로 변경했습니다.

이제 코드가 정상적으로 실행될 것입니다. 추가적인 문제가 발생하면 언제든지 다시 알려주